<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0" />
  <title>音乐台</title>
  <link rel="shortcut icon" href="https://wang64.cn/static/favicon.ico" />
  <link href="https://cdn.staticfile.org/twitter-bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.css">
  <!-- 垂直居中参考 https://www.cnblogs.com/yugege/p/5246652.html -->
  <!-- APlayer源码 https://github.com/MoePlayer/APlayer -->
  <!-- 搜索API https://github.com/metowolf/Meting https://github.com/metowolf/MetingJS -->
  <style>
    @font-face {
      font-family: 'Monoton';
      font-style: normal;
      font-weight: 400;
      src: local('Monoton'), local('Monoton-Regular'), url(https://text.wang64.cn/html5-shine-text/css/font/01.woff) format('woff');
    }

    @font-face {
      font-family: 'Pacifico';
      font-style: normal;
      font-weight: 400;
      src: local('Pacifico Regular'), local('Pacifico-Regular'), url(https://text.wang64.cn/html5-shine-text/css/font/03.woff) format('woff');
    }

    @font-face {
      font-family: 'Audiowide';
      font-style: normal;
      font-weight: 400;
      src: local('Audiowide'), local('Audiowide-Regular'), url(https://text.wang64.cn/html5-shine-text/css/font/05.woff) format('woff');
    }

    @font-face {
      font-family: 'Vampiro One';
      font-style: normal;
      font-weight: 400;
      src: local('Vampiro One'), local('VampiroOne-Regular'), url(https://text.wang64.cn/html5-shine-text/css/font/06.woff) format('woff');
    }

    html, body {
        width: 100%;
        height: 100%;
        margin: 0; 
        padding: 0;
    }

    body {
      background-image: url(https://wang926454.gitee.io/reader/Image/201811/normal/09010.png);
      /* background-color: #2e2e31; */
      /* 隐藏滚动条 */
      overflow: hidden;
    }

    #text {
      text-align: center;
      font-size: 2em;
      color: #FF1177;
      font-family: Monoton;
    }

    .middle {
      position: relative;
      top: 8%;
      transform: translateY(-8%);
    }

    .col-center-block {
        float: none;
        display: block;
        margin-left: auto;
        margin-right: auto;
    }

    .aplayer-wrap {
      max-width: 700px;
      margin: 20px auto;
    }
    
  </style>
  <script>
    var _hmt = _hmt || [];
    (function () {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?1826dd4e676f6c917705c5632139f6dd";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>
  <script src="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.js"></script>
  <script src="https://cdn.staticfile.org/jquery/2.1.1/jquery.min.js"></script>
  <script type="text/javascript" src="https://cdn.staticfile.org/layer/2.3/layer.js"></script>
</head>

<body>
  <div class="middle">
      <div class="col-md-12 col-sm-12 col-xs-12">
        <div style="margin: 0px auto; display: table;">
            <p id="text">MyMusic</p>
        </div>
      </div>

      <div class="col-md-12 col-sm-12 col-xs-12" style="margin-top: 10px;">
        <div style="margin: 0px auto; display: table;">
          <div class="col-md-6 col-sm-6 col-xs-6" style="margin-left: 8px;">
              <select id="serachType" class="form-control">
                <option value="netease">网易云音乐</option>
                <option value="kugou">酷狗音乐</option>
                <option value="tencent">QQ音乐</option>
                <option value="xiami">虾米音乐</option>
                <option value="baidu">百度音乐</option>
              </select>
          </div>
          <div class="col-md-6 col-sm-6 col-xs-6" style="margin-left: -16px;">
              <input id="serachText" type="text" class="form-control" placeholder="请输入关键字">
          </div>
        </div>
      </div>
    
      <div class="col-md-12 col-sm-12 col-xs-12" style="margin-top: 10px;">
        <div style="margin: 0px auto; display: table;">
            <a href="https://wang64.cn" target="_blank"><button type="button" class="btn btn-primary">我的主页</button></a> | 
            <button id="listBtn" type="button" class="btn btn-warning active" onclick="list()">云音乐热歌榜(每周四更新)</button> | 
            <button id="serachBtn" type="button" class="btn btn-info active" onclick="search(this)">搜索</button>
        </div>
      </div>

      <div id="aplayerDiv1" name="aplayerDiv" class="col-md-12 col-sm-12 col-xs-12">
        <div class="aplayer-wrap">
          <div id="aplayer1"></div>
        </div>
      </div>

      <div id="aplayerDiv2" name="aplayerDiv" class="col-md-12 col-sm-12 col-xs-12">
        <div class="aplayer-wrap">
          <div id="aplayer2"></div>
        </div>
      </div>

      <div id="aplayerDiv3" name="aplayerDiv" class="col-md-12 col-sm-12 col-xs-12">
        <div class="aplayer-wrap">
          <div id="aplayer3"></div>
        </div>
      </div>

      <div id="aplayerDiv4" name="aplayerDiv" class="col-md-12 col-sm-12 col-xs-12">
        <div class="aplayer-wrap">
          <div id="aplayer4"></div>
        </div>
      </div>

      <div class="col-md-12 col-sm-12 col-xs-12">
        <div style="margin: 0px auto; display: table;">
            <div class="btn-group">
              <button id="loveBtn" type="button" class="btn btn-danger active" onclick="netease()">我最近喜欢听的歌</button>
              <a href="https://music.163.com/#/playlist?id=26462279" target="_blank"><button type="button" class="btn btn-success active">歌单地址</button></a>
            </div> |
            <button id="loveBtn" type="button" class="btn btn-danger" onclick="love()">我的音乐列表</button>
        </div>
      </div>
  </div>
  
  <!-- <script type="text/javascript" src="https://wang926454.gitee.io/reader/JS/aplist.js"></script> -->
  <script type="text/javascript" src="JS/aplist.js"></script>

  <script>
    // 检测是否是手机查看
    var sUserAgent = navigator.userAgent.toLowerCase();
    var bIsIpad = sUserAgent.match(/ipad/i) == "ipad";
    var bIsIphoneOs = sUserAgent.match(/iphone os/i) == "iphone os";
    var bIsMidp = sUserAgent.match(/midp/i) == "midp";
    var bIsUc7 = sUserAgent.match(/rv:1.2.3.4/i) == "rv:1.2.3.4";
    var bIsUc = sUserAgent.match(/ucweb/i) == "ucweb";
    var bIsAndroid = sUserAgent.match(/android/i) == "android";
    var bIsCE = sUserAgent.match(/windows ce/i) == "windows ce";
    var bIsWM = sUserAgent.match(/windows mobile/i) == "windows mobile";
    if (bIsIpad || bIsIphoneOs || bIsMidp || bIsUc7 || bIsUc || bIsAndroid || bIsCE || bIsWM) {
        // 跳转移动端页面
        var middleArray = document.getElementsByClassName("middle");
        middleArray[0].style.top = "5%";
    }
  </script>

  <script>
    // 我的喜欢
    const ap1 = new APlayer({
      container: document.getElementById('aplayer1'),
      lrcType: 3,
      order: 'random',
      theme: '#000000',
      volume: 2.0,
      audio: getLove()
    });

    // 全部列表
    const ap2 = new APlayer({
      container: document.getElementById('aplayer2'),
      lrcType: 3,
      theme: '#000000',
      volume: 2.0
    });

    // 网易云
    const ap3 = new APlayer({
      container: document.getElementById('aplayer3'),
      lrcType: 3,
      order: 'random',
      theme: '#000000',
      volume: 2.0
    });

    // 搜索
    const ap4 = new APlayer({
      container: document.getElementById('aplayer4'),
      lrcType: 3,
      theme: '#000000',
      volume: 2.0
    });

    function list(){
      document.getElementById('aplayerDiv1').style.display = 'none';
      document.getElementById('aplayerDiv2').style.display = 'inline';
      document.getElementById('aplayerDiv3').style.display = 'none';
      document.getElementById('aplayerDiv4').style.display = 'none';
      document.getElementById('text').innerHTML = "HotList";
      if(ap2.list.audios.length <= 0){
        $.ajax({
          url: 'https://api.i-meto.com/api/v1/meting?server=netease&type=playlist&id=3778678',
          success: function (list) {
            var array = JSON.parse(list);
            if(array.length > 0){
              ap2.list.clear();
              ap2.list.add(array);
            }else{
              layer.msg('出现错误，请刷新页面');
            }
          }
        });
      }
    }

    function love(){
      document.getElementById('aplayerDiv1').style.display = 'inline';
      document.getElementById('aplayerDiv2').style.display = 'none';
      document.getElementById('aplayerDiv3').style.display = 'none';
      document.getElementById('aplayerDiv4').style.display = 'none';
      document.getElementById('text').innerHTML = "MyMusic";
    }

    // 初始化显示我的喜欢
    love();

    function netease(){
      document.getElementById('aplayerDiv1').style.display = 'none';
      document.getElementById('aplayerDiv2').style.display = 'none';
      document.getElementById('aplayerDiv3').style.display = 'inline';
      document.getElementById('aplayerDiv4').style.display = 'none';
      document.getElementById('text').innerHTML = "◢◤";
      // console.log(ap1);
      // console.log(ap3);
      if(ap3.list.audios.length <= 0){
        $.ajax({
          url: 'https://api.i-meto.com/api/v1/meting?server=netease&type=playlist&id=26462279',
          success: function (list) {
            var array = JSON.parse(list);
            if(array.length > 0){
              ap3.list.clear();
              ap3.list.add(array);
            }else{
              layer.msg('出现错误，请刷新页面');
            }
          }
        });
      }
    }

    function search(btn) {
      // 开始执行，先将按钮置为不可用，执行完后设置可用
      btn.disabled = true;
      var serachType = document.getElementById("serachType").value;
      var serachText = document.getElementById("serachText").value;
      if(serachText.trim() === ''){
        layer.msg('关键字为空');
        btn.disabled = false;
        return;
      }
      var url = "https://api.i-meto.com/api/v1/meting?type=search&server=" + serachType + "&id=" + serachText;
      $.ajax({
          url: url,
          success: function (list) {
            var array = JSON.parse(list);
            // console.log(url);
            // console.log(array);
            if(array.length > 0){
              document.getElementById('aplayerDiv1').style.display = 'none';
              document.getElementById('aplayerDiv2').style.display = 'none';
              document.getElementById('aplayerDiv3').style.display = 'none';
              document.getElementById('aplayerDiv4').style.display = 'inline';
              document.getElementById('text').innerHTML = "Search";
              ap4.list.clear();
              ap4.list.add(array);
            }else{
              layer.msg('没有搜索到任何结果，请切换平台尝试');
            }
            btn.disabled = false;
          }
      });
    }

    // 文字特效
    var colors = ['#FF1177','#228DFF','#FFDD1B','#B6FF00','#FF9900','#BA01FF'];
    var fonts = ['Pacifico','Audiowide','Vampiro One'];
    var text = document.getElementById("text");
    // 推荐使用setTimeout
    setTimeout(function () {
      text.style.color = colors[Math.floor(colors.length * Math.random())];
      text.style.fontFamily = fonts[Math.floor(fonts.length * Math.random())];
      setTimeout(arguments.callee, 1000);
    }, 1000);
  </script>
  <script type="text/javascript" src="https://wang926454.gitee.io/reader/JS/love.js"></script>
</body>

</html>